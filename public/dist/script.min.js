const alertShowandHide=function(e,a){$(".alert."+e).css("visibility","visible"),$(".alert."+e+" .content .body span").text(a),setTimeout(function(){$(".alert."+e).css("visibility","hidden")},15e3)},alertShow=function(e,a){$(".alert."+e).css("visibility","visible"),$(".alert."+e+" .content .body span").text(a)};$(document).ready(function(){$(".alert").each(function(){$(this).find(".close").on("click",function(){$(this).closest(".alert").css("visibility","hidden")})})});const calender={init:function(e){let a=new VanillaCalendar({selector:e,onSelect:e=>{e=new Date(e.date);console.log(e)}});a.set({pastDates:!1,datesFilter:!1})},range:function(e,a){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date,o=t[n.getMonth()]+" "+n.getFullYear(),e=(o.split(" "),n.getMonth()+parseInt(e)+1),a=n.getFullYear()+(parseInt(a)+parseInt(e/12)),r=t[e%12]+" "+a;console.log(r),$(".calender-section").on("click","button[data-calendar-toggle]",function(){o===$(".vanilla-calendar-header__label").text()?$('button[data-calendar-toggle="previous"]').prop("disabled",!0):$('button[data-calendar-toggle="previous"]').prop("disabled",!1),r===$(".vanilla-calendar-header__label").text()?$('button[data-calendar-toggle="next"]').prop("disabled",!0):$('button[data-calendar-toggle="next"]').prop("disabled",!1)})}};$(document).ready(function(){"booking-availablity"===$("body").data("page")&&(calender.init("#availablityCalender"),calender.range(0,1),$('button[data-calendar-toggle="previous"]').prop("disabled",!0))}),$(document).ready(function(){$("form .input-group-addon.pass").each(function(){$(this).on("click",function(){$(this).toggleClass("fa-eye-slash fa-eye");let e=$(this).siblings("input");"text"===e.attr("type")?e.attr("type","password"):e.attr("type","text")})})});const ajaxLoadingAnimation=function(){$(document).bind("ajaxSend",function(){$(".loading-overlay").css("visibility","visible"),$(".loading").removeClass("loading-stop")}).bind("ajaxComplete",function(){$(".loading-overlay").css("visibility","hidden"),$(".loading").addClass("loading-stop")})},validatePassword=function(e){for(var a=$(`[name="${e[0]}"`).val(),t=!0,n=1;n<e.length;n++)a!==$(`[name="${e[n]}"]`).val()&&(t=!1);if(!t)for(n=0;n<e.length;n++){var o=$(`[name="${e[n]}"]`).closest(".input-group");o.find(".error-box").text("Password not matching"),o.addClass("error")}return t},validateSelect=function(e){var a=!0;return $(e+" .select.required:visible").each(function(){var e=$(this).closest(".input-group");null===$(this).find(".form-control").val()&&(e.find(".error-box").text(e.attr("data-message")),e.addClass("error"),a=!1)}),a},validate=function(e){var a=!0;return $(e+" .required:visible").each(function(){var e=$(this).closest(".input-group");""===$(this).find(".form-control").val()&&(e.find(".error-box").text(e.attr("data-message")),e.addClass("error"),a=!1)}),a},clearError=function(e){$(e+" .required:visible").each(function(){var e=$(this).closest(".input-group");e.find(".error-box").text(""),e.removeClass("error")})},frmlogin={save:function(){var e={email:$('input[name="txtEmail"]').val(),password:$('input[name="txtPassword"]').val()};$.ajax({type:"POST",url:"/login",data:e,dataType:"json",complete:function(e){e=JSON.parse(e.responseText);e.success?window.location.href="/dashboard":e.error&&alertShowandHide("error",e.message)}})}};$(document).ready(function(){"Login Page"===$("body").data("page")&&(ajaxLoadingAnimation(),$('button[data-role="submit"]').on("click",function(){clearError("#frmLogin"),validate("#frmLogin")&&frmlogin.save()}))}),$(document).ready(function(){});const owenerDashboard={propertySave:function(){var e={name:$('input[name="txtPropertyName"]').val(),size:$('input[name="txtPropertySize"]').val(),type:$('select[name="txtPropertyType"]').val(),description:$('input[name="txtPropertyDescription"]').val(),address:$('input[name="txtPropertyAddress"]').val(),longitude:$('input[name="txtPropertyLongitude"]').val(),latitude:$('input[name="txtPropertyLatitude"]').val()};$.ajax({type:"POST",url:"/register/property",data:e,dataType:"json",complete:function(e){e=JSON.parse(e.responseText);e.success?($("#modalAddProperty").modal("hide"),alertShowandHide("success","Property added successful")):alertShowandHide("error",e.message)}})},userDetailsSave:function(){var e={name:$('input[name="txFullName"]').val(),email:$('input[name="txtEmail"]').val(),phone:$('input[name="txtPhone"]').val(),password:$('input[name="txtPassword"]').val()};$.ajax({type:"POST",url:"/update/userDetails",data:e,dataType:"json",complete:function(e){e=JSON.parse(e.responseText);e.success?($("#modalEmailConfirmation").modal("show"),$("#modalEmailConfirmation span.email").text(e.email)):alertShowandHide("error",e.message)}})}};$(document).ready(function(){"Owner-dashboard"===$("body").data("page")&&(ajaxLoadingAnimation(),$("#modalAddProperty").on("hidden.bs.modal",function(){$("#frmRegisterProperty").trigger("reset")}),$('button[data-role="user-details-submit"]').on("click",function(){clearError("#frmUserDetailsEdit"),$(".loading-overlay .loading").attr("data-loading-text","EditingDetails..."),validate("#frmUserDetailsEdit")&&owenerDashboard.userDetailsSave()}),$('button[data-role="submit"]').on("click",function(){clearError("#frmRegisterProperty"),$(".loading-overlay .loading").attr("data-loading-text","Registering..."),validate("#frmRegisterProperty")&&validateSelect("#frmRegisterProperty")&&owenerDashboard.propertySave()}))});const frmRegistration={save:function(){var e={name:$('input[name="txFullName"]').val(),email:$('input[name="txtEmail"]').val(),phone:$('input[name="txtPhone"]').val(),password:$('input[name="txtConfirmPassword"]').val(),role:$('input[name="txtPageRole"]').val()};$.ajax({type:"POST",url:"/register",data:e,dataType:"json",complete:function(e){e=JSON.parse(e.responseText);e.success?($("#modalEmailConfirmation").modal("show"),$("#modalEmailConfirmation span.email").text(e.email)):alertShowandHide("error",e.message)}})}};$(document).ready(function(){"Registraion Page"===$("body").data("page")&&(ajaxLoadingAnimation(),$("#register").on("click",function(){clearError("frmRegistration"),validate("#frmRegistration")&&validatePassword(["txtPassword","txtConfirmPassword"])&&frmRegistration.save()}),$('button[data-role="closeSuccessMessage"]').on("click",function(){window.location.href="/login"}))}),$(document).ready(function(){$(document).on("click",".sidebar-menu-icon",function(){$(".sidebar").toggleClass("open"),$("body").toggleClass("side-bar-overlay")}),$(document).on("click",".nav-list .list a",function(){$(".sidebar").removeClass("open"),$("body").removeClass("side-bar-overlay")})});